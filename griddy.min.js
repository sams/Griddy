(function(A){A.griddy=function(C,B){var D=this;D.$el=A(C);D.el=C;D.$iface=false;D.gList=[];D.$el.data("griddy",D);D.init=function(){if(typeof (rows)==="undefined"||rows===null){rows=10}if(typeof (rowheight)==="undefined"||rowheight===null){rowheight=0}if(typeof (rowgutter)==="undefined"||rowgutter===null){rowgutter=20}if(typeof (columns)==="undefined"||columns===null){columns=4}if(typeof (columnheight)==="undefined"||columnheight===null){columnheight=0}if(typeof (columngutter)==="undefined"||columngutter===null){columngutter=20}if(typeof (color)==="undefined"||color===null){color="#ccc"}if(typeof (fHeight)==="undefined"||fHeight===null){fHeight=0}if(typeof (opacity)==="undefined"||opacity===null){opacity=30}D.rows=rows;D.rowheight=rowheight;D.rowgutter=rowgutter;D.columns=columns;D.columnheight=columnheight;D.columngutter=columngutter;D.color=color;D.opacity=opacity;D.options=A.extend({},A.griddy.defaultOptions,B);D.$el.css("position","relative");var I={rows:10,rowheight:0,rowgutter:20,columns:4,columnwidth:0,columngutter:20,color:"#ccc",opacity:30};var H=A.extend(I,D.options);var J=A.meta?A.extend({},H,$$.data()):H;var G=D.$el.width();var E=A(document).height();if(J.fHeight!=0){E=J.fHeight==true?D.$el.height():J.fHeight}if(J.columnwidth==0){J.columnwidth=Math.floor(G-((J.columns-1)*J.columngutter))/J.columns}if(J.rowheight==0){J.rowheight=Math.floor(E-((J.rows-1)*J.rowgutter))/J.rows}D.$el.prepend("<div class='griddy' style='display:none;overflow:hidden;position:absolute;left:0;top:0;width:100%;height:"+(E-20)+"px;'><div class='griddy-r' style='position:relative;width:100%;height:100%;display:block;overflow:hidden;'><div class='griddy-columns' style='position:absolute;top:0;left:0;width:100%;height:100%;'></div></div></div>");if(J.columns!=0){for(var F=0;F<J.columns;F++){if(F!=0){A(".griddy-r").append("<div style='width:"+J.columngutter+"px;display:inline;float:left;height:100%;'></div>")}A(".griddy-r",D.$el).append("<div style='width:"+J.columnwidth+"px;height:100%;display:block;float:left;text-align:center;position:relative;'><span style='background:#000;padding:5px;color:#fff;font-weight:bold;border:1px solid #fff;'>"+J.columnwidth+"px</span><div style='width:100%;height:100%;position:absolute;top:0;left:0;display:block;background:"+J.color+";opacity:"+(J.opacity/100)+";filter:alpha(opacity="+J.opacity+");'></div></div>")}}if(J.rows!=0){for(var F=0;F<J.rows;F++){if(F!=0){A(".griddy-columns").append("<div style='height:"+J.rowgutter+"px;display:block;float:left;width:100%;'></div>")}A(".griddy-columns",D.$el).append("<div style='height:"+J.rowheight+"px;width:100%;float:left;display:block;line-height:"+J.rowheight+"px;position:relative;'><span style='background:#000;padding:5px;color:#fff;font-weight:bold;border:1px solid #fff;'>"+J.rowheight+"px</span><div style='width:100%;height:100%;position:absolute;top:0;left:0;display:block;background:"+J.color+";opacity:"+(J.opacity/100)+";filter:alpha(opacity="+J.opacity+");'></div></div>")}}D.buildInterface()};D.buildInterface=function(E){A("#griddyInterface").length;if(A("#griddyInterface").length!=1){A("body").prepend("<div id='griddyInterface' style='width:180px;position:fixed;top:5px;right:5px;cursor:pointer;padding:5px;background:#000;color:#fff;font-weight:bold;font-size:18px;z-index:999;'><div class='actions'><span onclick=\"$('.griddy').toggle();return false;\">Toggle Griddy</span><div class='list'><ol><li>grid one</li><li>grid one</li><li>grid one</li><li>grid one</li><li>grid one</li><li>grid one</li><li>grid one</li></ol></div><span onclick=\"$('#griddyInterface .list').toggle();return false;\">grid list</span><span onclick=\"$('#griddyInterface .construct').toggle();return false;\">add grid</span><div class='construct'><ul><li>rows: 10</li><li>rowheight: 0</li><li>rowgutter: 20</li><li>columns: 4</li><li>columnheight: 0</li><li>columngutter: 20</li><li>color: '#ccc'</li><li>opacity: 30</li></ul><a class='$.griddy.add();'>add</a></div></div>");D.$iface=A("#griddyInterface")}};D.add=function(E){alert("hello world")};D.init()};A.griddy.defaultOptions={rows:10,rowheight:0,rowgutter:20,columns:4,columnheight:0,columngutter:20,color:"#ccc",opacity:30,fHeight:false};A.fn.griddy=function(J,H,C,D,G,B,E,F,I){return this.each(function(){(new A.griddy(this,J,H,C,D,G,B,E,F,I))})}})(jQuery);